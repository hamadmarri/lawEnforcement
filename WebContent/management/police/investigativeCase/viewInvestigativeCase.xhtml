<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<f:metadata>
		<f:viewParam name="id" value="#{controllerInvestigativeCase.id}" />
		<f:viewParam name="id" value="#{controllerAccessManager.relatableId}" />
		<f:event listener="#{controllerAccessManager.manage}"
			type="preRenderView" />
	</f:metadata>
</h:head>
<h:body>
	<ui:composition template="/WEB-INF/template.xhtml">
		<ui:define name="title">Adala - Investigative Case</ui:define>
		<ui:define name="content">

			<div class="container">


				<div class="page-header">
					<h4>Investigative Case</h4>
				</div>

				<div class="row">

					<ul class="breadcrumb no-bg-color">
						<li><h:link value="Home" outcome="/index.xhtml" /><span
							class="divider" /></li>
						<li><h:link value="Investigative Cases List"
								outcome="/management/police/investigativeCase/listInvestigativeCases.xhtml" /></li>
						<li class="active">Investigative Cases</li>
					</ul>
				</div>


				<c:set var="investigativeCase"
					value="#{controllerInvestigativeCase.investigativeCase}" />
				<c:set var="incidentReports"
					value="#{controllerInvestigativeCase.investigativeCase.incidentReports}" />
				<c:set var="relatable"
					value="#{controllerInvestigativeCase.investigativeCase}" />
				<c:set var="included" value="true" />


				<div class="row">

					<div class="col-md-9">

						<div class="row">

							<!-- HORIZONTAL LINE -->
							<hr />

							<!-- STATUS -->
							<h:outputLabel value="Status:&nbsp;" />
							<h:outputText styleClass="case-open" value="open"
								rendered="#{controllerInvestigativeCase.investigativeCase.status eq 'Open'}" />
							<h:outputText styleClass="case-pending" value="pending"
								rendered="#{controllerInvestigativeCase.investigativeCase.status eq 'Pending'}" />
							<h:outputText styleClass="case-inProgress" value="in progress"
								rendered="#{controllerInvestigativeCase.investigativeCase.status eq 'In progress'}" />
							<h:outputText styleClass="case-refused" value="refused"
								rendered="#{controllerInvestigativeCase.investigativeCase.status eq 'Refused'}" />
							<h:outputText styleClass="case-closed" value="closed"
								rendered="#{controllerInvestigativeCase.investigativeCase.status eq 'Closed'}" />



							<!-- CONTROLS -->
							<h:form styleClass="pull-right">
								<h:commandButton styleClass="btn btn-primary" value="open"
									action="#{controllerInvestigativeCase.openCase()}"
									rendered="#{userSessionController.isSupervisor() and controllerInvestigativeCase.investigativeCase.status eq 'Closed' }" />
								<h:commandButton styleClass="btn btn-success" value="accept"
									action="#{controllerInvestigativeCase.acceptCase()}"
									rendered="#{userSessionController.isInvestigator() and controllerInvestigativeCase.investigativeCase.status ne 'Closed'}" />
								<h:commandButton styleClass="btn btn-danger" value="refuse"
									action="#{controllerInvestigativeCase.refuseCase()}"
									rendered="#{userSessionController.isInvestigator() and controllerInvestigativeCase.investigativeCase.status ne 'Closed'}" />
								<h:commandButton styleClass="btn btn-danger" value="close"
									action="#{controllerInvestigativeCase.closeCase()}"
									rendered="#{userSessionController.isSupervisor() and controllerInvestigativeCase.investigativeCase.status ne 'Closed'}" />
							</h:form>

						</div>
						<!-- end row -->


						<div class="row">

							<h4 id="description">Description:</h4>

							<h:outputText styleClass="lead"
								value="#{controllerInvestigativeCase.investigativeCase.description}" />


							<!-- EDIT -->
							<div class="col-md-offset-11">
								<h:link styleClass="btn btn-link" value="Edit" outcome="edit">
									<f:param name="id" value="#{controllerInvestigativeCase.id}" />
								</h:link>
							</div>

							<!-- HORIZONTAL LINE -->
							<hr />

						</div>
						<!-- end row -->

						<div class="row top45">
							<div class="col-md-6">
								<!-- DETAILS -->
								<h4 id="details">Details:</h4>
								<h:panelGrid columns="2" styleClass="table borderless">
									<h:outputLabel value="Start Date" />
									<h:outputLabel
										value="#{controllerInvestigativeCase.investigativeCase.startDate}">
										<f:convertDateTime pattern="MMMM dd, YYYY" />
									</h:outputLabel>

									<h:outputLabel value="Due Date" />
									<h:outputLabel
										value="#{controllerInvestigativeCase.investigativeCase.dueDate}">
										<f:convertDateTime pattern="MMMM dd, YYYY" />
									</h:outputLabel>

									<h:outputLabel value="Officer who created it" />
									<h:link
										value="#{controllerInvestigativeCase.investigativeCase.officerWhoCreatedIt.personName}"
										outcome="viewOfficer">
										<f:param name="id"
											value="#{controllerInvestigativeCase.investigativeCase.officerWhoCreatedIt.id}" />
									</h:link>


									<h:outputLabel value="Crime Scene" />
									<h:link value="view"
										outcome="/management/police/crimeScene/viewCrimeScene.xhtml?id=#{controllerInvestigativeCase.investigativeCase.crimeScene.crimeSceneId}" />

								</h:panelGrid>
							</div>
							<!-- col-6 -->


							<div class="col-md-4 col-md-offset-2">

								<div class="row">
									<!-- incident reports list -->
									<h4 id="incidentReports">Incident Reports:</h4>

									<div class="col-md-12">
										<ui:include
											src="/management/events/incidentReport/listIncidentReports.xhtml" />
										<h:form>
											<p:inputText
												value="#{controllerInvestigativeCase.newIncidentReportId}" />
											<h:commandButton styleClass="btn btn-link" value="add"
												action="#{controllerInvestigativeCase.addIncidentReport}" />
										</h:form>
									</div>
								</div>
								<!-- HORIZONTAL LINE -->
								<hr />
								<div class="row">
									<!-- investigators responsible for -->
									<h4 id="investigators">Investigators:</h4>
									<div class="col-md-12">
										<ui:include
											src="/management/police/investigator/listInvestigators.xhtml" />
									</div>
								</div>

							</div>

						</div>
						<!-- end row -->



						<!-- HORIZONTAL LINE -->
						<hr />

						<div class="row">
							<!-- Activity list -->
							<h4 id="activities">Activities:</h4>
							<div class="col-md-12">
								<ui:include
									src="/management/police/investigativeCase/activity/listActivities.xhtml" />
							</div>
						</div>

					</div>
					<!-- col-md-9 -->

					<!-- List -->
					<div class="col-md-2 col-md-offset-1">
						<div class="list-group">
							<a class="list-group-item" href="#description">Description</a> <a
								class="list-group-item" href="#details">Details</a> <a
								class="list-group-item" href="#incidentReports">Incident
								Reports</a> <a class="list-group-item" href="#investigators">Investigators</a>
							<a class="list-group-item" href="#activities">Activities</a>
						</div>
					</div>

				</div>
				<!-- row master -->
			</div>
		</ui:define>
	</ui:composition>
</h:body>
</html>